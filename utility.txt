utility functions for verion 3